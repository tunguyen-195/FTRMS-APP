<h1 class="text-center">{{t 'userManagement.title'}}</h1>

<!-- Tabs navigation -->
<ul class="nav nav-tabs" id="userManagementTabs" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="manage-users-tab" data-bs-toggle="tab" data-bs-target="#manage-users" type="button" role="tab" aria-controls="manage-users" aria-selected="true">{{t 'userManagement.manageUsersTab'}}</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="add-user-tab" data-bs-toggle="tab" data-bs-target="#add-user" type="button" role="tab" aria-controls="add-user" aria-selected="false">{{t 'userManagement.addUserTab'}}</button>
  </li>
</ul>

<!-- Tabs content -->
<div class="tab-content" id="userManagementTabsContent">
  <!-- Manage Users Tab -->
  <div class="tab-pane fade show active" id="manage-users" role="tabpanel" aria-labelledby="manage-users-tab">
    <!-- Flash messages -->
    {{#if success_msg}}
      <div class="alert alert-success">{{success_msg}}</div>
    {{/if}}
    {{#if error_msg}}
      <div class="alert alert-danger">{{error_msg}}</div>
    {{/if}}

    <!-- User list -->
    <table class="table">
      <thead>
        <tr>
          <th>{{t 'userManagement.table.username'}}</th>
          <th>{{t 'userManagement.table.email'}}</th>
          <th>{{t 'userManagement.table.phone'}}</th>
          <th>{{t 'userManagement.table.role'}}</th>
          <th>{{t 'userManagement.table.actions'}}</th>
        </tr>
      </thead>
      <tbody>
        {{#each users}}
          <tr>
            <td>{{this.username}}</td>
            <td>{{this.email}}</td>
            <td>{{this.phone}}</td>
            <td>{{this.role}}</td>
            <td>
              <a href="/admin/users/{{this._id}}" class="btn btn-info">
                <i class="fas fa-info-circle"></i> {{t 'userManagement.table.detailsButton'}}
              </a>
            </td>
          </tr>
        {{/each}}
      </tbody>
    </table>
  </div>

  <!-- Add User Tab -->
  <div class="tab-pane fade" id="add-user" role="tabpanel" aria-labelledby="add-user-tab">
    <h2>{{t 'userManagement.addUserTitle'}}</h2>
    <form action="/admin/users/add" method="POST">
      <input type="hidden" name="_csrf" value="{{csrfToken}}">
      <div class="form-group">
        <label for="username">{{t 'userManagement.form.username'}}</label>
        <input type="text" name="username" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="email">{{t 'userManagement.form.email'}}</label>
        <input type="email" name="email" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="phone">{{t 'userManagement.form.phone'}}</label>
        <input type="text" name="phone" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="password">{{t 'userManagement.form.password'}}</label>
        <input type="password" name="password" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="name">{{t 'userManagement.form.name'}}</label>
        <input type="text" name="name" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="dateOfBirth">{{t 'userManagement.form.dateOfBirth'}}</label>
        <input type="date" name="dateOfBirth" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="nationality">{{t 'userManagement.form.nationality'}}</label>
        <input type="text" name="nationality" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="gender">{{t 'userManagement.form.gender'}}</label>
        <select name="gender" class="form-control" required>
          <option value="Male">{{t 'userManagement.form.genderMale'}}</option>
          <option value="Female">{{t 'userManagement.form.genderFemale'}}</option>
          <option value="Other">{{t 'userManagement.form.genderOther'}}</option>
        </select>
      </div>
      <div class="form-group">
        <label for="role">{{t 'userManagement.form.role'}}</label>
        <select name="role" class="form-control">
          <option value="user">{{t 'userManagement.form.roleUser'}}</option>
          <option value="manager">{{t 'userManagement.form.roleManager'}}</option>
          <option value="admin">{{t 'userManagement.form.roleAdmin'}}</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">{{t 'userManagement.form.addButton'}}</button>
    </form>
  </div>
</div>

<script>
  function confirmDelete() {
    return confirm('{{t "userManagement.confirmDelete"}}');
  }
</script>