<div class="text-center my-4">
  <h1 class="residence-title">{{t 'residences.title'}}</h1>
</div>

<!-- Tabs navigation -->
<ul class='nav nav-tabs' id='residenceTabs' role='tablist'>
  <li class='nav-item' role='presentation'>
    <button
      class='nav-link active'
      id='pending-tab'
      data-bs-toggle='tab'
      data-bs-target='#pending'
      type='button'
      role='tab'
      aria-controls='pending'
      aria-selected='true'
    >{{t 'residences.statusPending'}}</button>
  </li>
  <li class='nav-item' role='presentation'>
    <button
      class='nav-link'
      id='approved-tab'
      data-bs-toggle='tab'
      data-bs-target='#approved'
      type='button'
      role='tab'
      aria-controls='approved'
      aria-selected='false'
    >{{t 'residences.statusApproved'}}</button>
  </li>
  <li class='nav-item' role='presentation'>
    <button
      class='nav-link'
      id='rejected-tab'
      data-bs-toggle='tab'
      data-bs-target='#rejected'
      type='button'
      role='tab'
      aria-controls='rejected'
      aria-selected='false'
    >{{t 'residences.statusRejected'}}</button>
  </li>
</ul>

<!-- Tabs content -->
<div class='tab-content' id='residenceTabsContent'>
  <div class="tab-pane active" id="pending">
    {{#each declarations}}
      {{#if (eq this.status 'Pending')}}
        <div class="card mb-3">
          <div class="card-header">
            <h5>{{this.user.full_name}}</h5>
            <p><strong>{{t 'residences.email'}}:</strong> {{this.user.email}}</p>
            <p><strong>{{t 'residences.phone'}}:</strong> {{this.user.phone}}</p>
          </div>
          <div class="card-body">
            <p><strong>{{t 'residences.full_name'}}:</strong> {{this.full_name}}</p>
            <p><strong>{{t 'residences.nationality'}}:</strong> {{this.nationality}}</p>
            <p><strong>{{t 'residences.accommodation'}}:</strong> {{this.accommodation}}</p>
            <p><strong>{{t 'residences.check_in'}}:</strong> {{formatDate this.check_in}}</p>
            <p><strong>{{t 'residences.check_out'}}:</strong> {{formatDate this.check_out}}</p>
            <p><strong>{{t 'residences.reason'}}:</strong> {{this.reason}}</p>
            <p><strong>{{t 'residences.declarationDate'}}:</strong> {{formatDate this.declarationDate}}</p>
            <p><strong>{{t 'residences.status'}}:</strong> {{this.status}}</p>
            <button class="btn btn-success" data-id="{{this._id}}" data-status="Approved">{{t 'residences.approve'}}</button>
            <button class="btn btn-danger" data-id="{{this._id}}" data-status="Rejected">{{t 'residences.reject'}}</button>
          </div>
        </div>
      {{/if}}
    {{/each}}
  </div>
  <div class="tab-pane" id="approved">
    {{#each declarations}}
      {{#if (eq this.status 'Approved')}}
        <div class="card mb-3">
          <div class="card-header">
            <h5>{{this.user.full_name}}</h5>
            <p><strong>{{t 'residences.email'}}:</strong> {{this.user.email}}</p>
            <p><strong>{{t 'residences.phone'}}:</strong> {{this.user.phone}}</p>
          </div>
          <div class="card-body">
            <p><strong>{{t 'residences.full_name'}}:</strong> {{this.full_name}}</p>
            <p><strong>{{t 'residences.nationality'}}:</strong> {{this.nationality}}</p>
            <p><strong>{{t 'residences.accommodation'}}:</strong> {{this.accommodation}}</p>
            <p><strong>{{t 'residences.check_in'}}:</strong> {{formatDate this.check_in}}</p>
            <p><strong>{{t 'residences.check_out'}}:</strong> {{formatDate this.check_out}}</p>
            <p><strong>{{t 'residences.reason'}}:</strong> {{this.reason}}</p>
            <p><strong>{{t 'residences.declarationDate'}}:</strong> {{formatDate this.declarationDate}}</p>
            <p><strong>{{t 'residences.status'}}:</strong> {{this.status}}</p>
          </div>
        </div>
      {{/if}}
    {{/each}}
  </div>
  <div class="tab-pane" id="rejected">
    {{#each declarations}}
      {{#if (eq this.status 'Rejected')}}
        <div class="card mb-3">
          <div class="card-header">
            <h5>{{this.user.full_name}}</h5>
            <p><strong>{{t 'residences.email'}}:</strong> {{this.user.email}}</p>
            <p><strong>{{t 'residences.phone'}}:</strong> {{this.user.phone}}</p>
          </div>
          <div class="card-body">
            <p><strong>{{t 'residences.full_name'}}:</strong> {{this.full_name}}</p>
            <p><strong>{{t 'residences.nationality'}}:</strong> {{this.nationality}}</p>
            <p><strong>{{t 'residences.accommodation'}}:</strong> {{this.accommodation}}</p>
            <p><strong>{{t 'residences.check_in'}}:</strong> {{formatDate this.check_in}}</p>
            <p><strong>{{t 'residences.check_out'}}:</strong> {{formatDate this.check_out}}</p>
            <p><strong>{{t 'residences.reason'}}:</strong> {{this.reason}}</p>
            <p><strong>{{t 'residences.declarationDate'}}:</strong> {{formatDate this.declarationDate}}</p>
            <p><strong>{{t 'residences.status'}}:</strong> {{this.status}}</p>
          </div>
        </div>
      {{/if}}
    {{/each}}
  </div>
</div>

<!-- Include Select2 and Bootstrap CSS/JS -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
<script src="/js/residences.js"></script>